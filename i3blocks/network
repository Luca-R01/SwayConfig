#!/bin/bash

# Ottieni tutte le INTERFACES di rete attive
INTERFACES=$(ip -o link show | awk -F': ' '{print $2}' | grep -v 'lo')

# Colore verde
COLOR="#4AF626"

# Itera attraverso le INTERFACES
for INTERFACE in $INTERFACES; do
	
	# Ottieni l'indirizzo IP associato all'INTERFACE
	IP=$(ip addr show $INTERFACE | grep "inet " | awk '{print $2}' | cut -f1 -d/)
		
	# Controllo che l'OUTPUT sia presente
	if [[ ! -z $IP ]] ; then
		if [[ $INTERFACE = "wlan"* ]] ; then
			ICON=""
		elif [[ $INTERFACE = "eth"* ]] ; then
			ICON=""
		elif [[ $INTERFACE = "wwan"* ]] ; then
			ICON=""
		elif [[ $INTERFACE = "tun"* ]] ; then
			ICON=""
		elif [[ $INTERFACE = "docker"* ]] ; then
			ICON=""
		else 
                        ICON=""
		fi
		# Aggiungi l'INTERFACE e l'IP alla variabile di uscita
		OUTPUT="$OUTPUT $ICON $IP"
	fi	
done	
if [[ -z "$OUTPUT" ]] ; then
	# Colore rosso
	COLOR="#FF0000"
        OUTPUT=" Disconnected"
fi

# Stampa l'OUTPUT
echo $OUTPUT && echo "" && echo "$COLOR"

