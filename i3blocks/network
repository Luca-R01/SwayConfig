#!/bin/bash

# Ottieni tutte le interfacce di rete attive
interfacce=$(ip -o link show | awk -F': ' '{print $2}' | grep -v 'lo')

# Colore verde
COLOR=$(echo "#4AF626")

# Itera attraverso le interfacce
for interfaccia in $interfacce; do
	
	# Ottieni l'indirizzo IP associato all'interfaccia
	ip=$(ip addr show $interfaccia | grep "inet " | awk '{print $2}' | cut -f1 -d/)
		
	# Controllo che l'output sia presente
	if [[ ! -z $ip ]] ; then
		if [[ $interfaccia = "wlan"* ]] ; then
			icon=$(echo "")
		elif [[ $interfaccia = "eth"* ]] ; then
			icon=$(echo "")
		elif [[ $interfaccia = "wwan"* ]] ; then
			icon=$(echo "")
		elif [[ $interfaccia = "tun"* ]] ; then
			icon=$(echo "")
		else 
                        icon=$(echo "")
		fi
		# Aggiungi l'interfaccia e l'IP alla variabile di uscita
		output="$output $icon $ip"
	fi	
done	
if [[ -z "$output" ]] ; then
	# Colore rosso
	COLOR=$(echo "#FF0000")
        output=$(echo " Disconnected")
fi

# Stampa l'output
echo $output && echo "" && echo "$COLOR"

